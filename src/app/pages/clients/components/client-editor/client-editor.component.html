<shared-card [borderRadius]="20" [title]="(requestId?'client.clientDetails':'client.addClient') | translate">
  <p-button
    *ngIf="requestId"
    headerActions
    (click)="onToggleFields()"
    styleClass="p-button-primary p-0"
    icon="pi pi-pencil"
  ></p-button>
  <form class="mt-2 p-lg-2" [formGroup]="formly" body (ngSubmit)="onSubmit()">
    <formly-form
      [form]="formly"
      [fields]="formlyFields"
      [model]="formlyModel"
    ></formly-form>
    <p-tabView >
      <p-tabPanel
        [header]="item.label"
        *ngFor="let item of items; let i = index"
      >
        <!-- <app-client-add-company-address *ngIf="i==0"></app-client-add-company-address>
          <app-client-add-billing-address *ngIf="i==1"></app-client-add-billing-address> -->
        <app-client-editor-contacts *ngIf="i == 0" [data]="formlyModel['clientContacts']" [readOnly]="readOnly"></app-client-editor-contacts>
      </p-tabPanel>
    </p-tabView>
    <div class="mt-4 text-end" *ngIf="!this.readOnly">
      <p-button
        [loading]="isSubmit"
        styleClass="p-button-primary d-block py-3"
        type="submit"
        label="{{ 'btn.submit' | translate }}"
      ></p-button>
    </div>
  </form>
</shared-card>
